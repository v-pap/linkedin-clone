package model;

import java.io.Serializable;
import javax.persistence.*;

import controllers.$missing$;


/**
 * The persistent class for the administrators database table.
 * 
 */
@Entity
@Table(name="administrators")
@NamedQuery(name="Administrator.findAll", query="SELECT a FROM Administrator a")
public class Administrator implements Serializable {
	private static final long serialVersionUID = 1L;
	private static final String PERSISTENCE_UNIT_NAME = "LinkedInClone";
    private static EntityManagerFactory factory;

	@Id
	private String email;

	private String password;

	public Administrator() {
	}

	public String getEmail() {
		return this.email;
	}

	public void setEmail(String email) {
		this.email = email;
	}

	public String getPassword() {
		return this.password;
	}

	public void setPassword(String password) {
		this.password = password;
	}
	
	public String validate() {
        String flag="failure";
        factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
        EntityManager em = factory.createEntityManager();
        Query q = em.createQuery("SELECT u FROM Administrator u WHERE u.Email = :email AND u.Password = :pass");
        q.setParameter("email", email);
        q.setParameter("pass", password);
		 try{
		     Administrator admin = (Administrator) q.getSingleResult();
		   if (email.equalsIgnoreCase(admin.getEmail())&&password.equals(admin.getPassword())) {
		      flag="success";
		   }
		 }catch(Exception e){      
		     return null;
		 }
	}

}