package model;
import java.util.*;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.Query;

public class loginbean {
	private static final String PERSISTENCE_UNIT_NAME = "LinkedInClone";
    private static EntityManagerFactory factory;
   
   private String email;
   private String password;
   public loginbean() { }
   public String getUserName() { return userName; }
   public void setUserName(String userName) { this.userName=userName; }
   public String getPassword() { return password; }
   public void setPassword(String password) { this.password=password; }
   public String validate() {
        String flag="failure";
            factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
          EntityManager em = factory.createEntityManager();
          Query q = em.createQuery("SELECT u FROM Administrator u WHERE u.Email = :email AND u.Password = :pass");
         q.setParameter("email", email);
         q.setParameter("pass", password);
         try{
             Administrator admin = (Administrator) q.getSingleResult();
           if (email.equalsIgnoreCase(admin.getEmail())&&password.equals(admin.getPassword())) {
              flag="success";
           }
         }catch(Exception e){      
             return null;
         }

        return flag;
   }
}
